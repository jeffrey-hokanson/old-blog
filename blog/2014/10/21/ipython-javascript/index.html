<!DOCTYPE html>
<html lang="en">

  <head>
      <title>Applying Math</title>
      <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,400,600,700' rel='stylesheet' type='text/css' />
      <link href='http://fonts.googleapis.com/css?family=Merriweather:300' rel='stylesheet' type='text/css'/>
      <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:200,400,700' rel='stylesheet' type='text/css'/>
      <link rel="stylesheet" type="text/css" href="http://blog.hokanson.us/theme/css/icons.css"/>
      <link rel="stylesheet" type="text/css" href="http://blog.hokanson.us/theme/css/styles.css"/>
      <meta charset="utf-8" />
        <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Applying Math Atom Feed" />
  </head>

  <body id="index">
    <!-- header -->
    <header class="siteheader">
      <!-- site image -->

      <div class = "sitebanner">
        <h1><a class="sitetitle nodec" href="http://blog.hokanson.us">Applying Math</a></h1>
        <h3 class ="sitesubtitle">Stories from the trenches of science</h3>
        <!-- nav -->
        <nav class="menu">
          <ul>
            <!-- menu items-->
              <li><a class="nodec" href="/archives.html">Archives</a></li>
              <li><a class="nodec" href="http://www.hokanson.us">Home Page</a></li>
            <!--pages-->
                <li><a class="nodec" href="http://blog.hokanson.us/pages/about.html">About</a></li>
            <!-- services icons -->
          </ul>
        </nav>
      </div> <!-- sitebanner -->
    </header>

    <!-- content -->

<section class="content">

  <h3 class="posttitle">
    <a class="nodec" href="/blog/2014/10/21/ipython-javascript/" rel="bookmark" title="Permalink to Adding Custom Javascript to the IPython Environment">
      Adding Custom Javascript to the IPython Environment
    </a>
  </h3>

  <div class="postinfo">
    <p class="published" title="2014-10-21T00:00:00">
      Oct 21, 2014
    </p>

  </div><!-- .postinfo -->

  <div class="article">
    <p>I've been working on learning <a href="http://d3js.org/">D3.js</a> for data visualization work at MD Anderson.
To speed development, one thing I wanted to do was include d3.js in every document so I didn't have to load 
it manually.
This was a bit tricky.
First, I located where the IPython configuration directory is;
on UNIX like systems, this is <code>~/.ipython/profile_default</code>.
Inside this directory, we are interested in the <code>static/custom</code> directory.
There, we place the <a href="https://raw.githubusercontent.com/mbostock/d3/master/d3.min.js">minimized D3.js file</a> named <code>d3.min.js</code>.</p>
<div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="cp">[</span><span class="nx">IPython.events</span><span class="cp">]</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;app_initialized.NotebookApp&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">require</span><span class="p">(</span><span class="cp">[</span><span class="s1">&#39;/static/custom/d3.min.js&#39;</span><span class="cp">]</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">loader</span><span class="p">){</span>
        <span class="nx">loader</span><span class="p">.</span><span class="nx">parameters</span><span class="p">(</span><span class="s1">&#39;dummy&#39;</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;D3.js loaded&#39;</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>


<p>As a result, you can now run D3.js examples without having to include any foreign scripts;
for example, copying the <a href="http://bost.ocks.org/mike/bar/">first tutorial example</a>, we can simply have a cell execute
the following code and have the corresponding bar plot rendered.</p>
<div class="highlight"><pre><span class="nb">from</span> <span class="nx">IPython.display</span> <span class="k">import</span> <span class="nx">HTML</span>
<span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;!DOCTYPE html&gt;</span>
<span class="s2">&lt;meta charset=&quot;</span><span class="nx">utf</span><span class="o">-</span><span class="mi">8</span><span class="s2">&quot;&gt;</span>
<span class="s2">&lt;style&gt;</span>

<span class="s2">.chart div {</span>
<span class="s2">  font: 10px sans-serif;</span>
<span class="s2">  background-color: steelblue;</span>
<span class="s2">  text-align: right;</span>
<span class="s2">  padding: 3px;</span>
<span class="s2">  margin: 1px;</span>
<span class="s2">  color: white;</span>
<span class="s2">}</span>

<span class="s2">&lt;/style&gt;</span>
<span class="s2">&lt;div class=&quot;</span><span class="nx">chart</span><span class="s2">&quot;&gt;&lt;/div&gt;</span>
<span class="s2">&lt;script&gt;</span>

<span class="s2">var data = [4, 8, 15, 16, 23, 42];</span>

<span class="s2">var x = d3.scale.linear()</span>
<span class="s2">    .domain([0, d3.max(data)])</span>
<span class="s2">    .range([0, 420]);</span>

<span class="s2">d3.select(&quot;</span><span class="bp">.</span><span class="nx">chart</span><span class="s2">&quot;)</span>
<span class="s2">  .selectAll(&quot;</span><span class="nb">div</span><span class="s2">&quot;)</span>
<span class="s2">    .data(data)</span>
<span class="s2">  .enter().append(&quot;</span><span class="nb">div</span><span class="s2">&quot;)</span>
<span class="s2">    .style(&quot;</span><span class="nb">width</span><span class="s2">&quot;, function(d) { return x(d) + &quot;</span><span class="nx">px</span><span class="s2">&quot;; })</span>
<span class="s2">    .text(function(d) { return d; });</span>

<span class="s2">&lt;/script&gt;&quot;&quot;&quot;</span>
<span class="n">h</span> <span class="o">=</span> <span class="nx">HTML</span><span class="p">(</span><span class="nb">s</span><span class="p">);</span> <span class="nx">h</span>
</pre></div>
  </div><!-- .content -->

</section>


    <!-- footer -->
    <footer>
      <p>
        Â© Jeffrey M. Hokanson, license <a href=""> </a>
        unless otherwise noted.
        Generated by <a href= "http://docs.getpelican.com/">Pelican</a> with
        <a href="http://github.com/porterjamesj/crowsfoot">crowsfoot</a> theme.
      </p>
    </footer>
  </body>
</html>